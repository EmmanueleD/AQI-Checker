/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./src/CSS/style.css":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://aqi-checker/./src/CSS/style.css?")},"./src/JS/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _CSS_style_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../CSS/style.css */ \"./src/CSS/style.css\");\n\nconst searchForm = document.querySelector(\".search-form\");\nconst inputText = document.querySelector(\".input-text\");\nconst infoBox = document.querySelector(\".info-box\");\n\nconst aqiIndex = document.getElementById('aqi-index');\nconst aqiLevelMessage = document.getElementById('aqi-level');\nconst heathImplications = document.getElementById('health-implications');\nconst cautionaryStatement = document.getElementById('cautionary-statement');\nconst cityName = document.querySelector(\".city-name\");\n\nconst AQI_KEY = \"MISSING_ENV_VAR\".AQI_KEY;\n\n// ---< Render map >--- ---<>--- ---<>---\nconst mymap = L.map('mapid');\nlet marker = \"\";\nL.tileLayer(`https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZW1tYW51ZWxlLW9ubGluZSIsImEiOiJja28yMmh0bjEwMm5hMnZtbGlsZ3UwbXozIn0.ECsgpDntVzNVDMZ9nhFy5A`, {\n    attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors, Imagery © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n    maxZoom: 18,\n    id: 'mapbox/streets-v11',\n    tileSize: 512,\n    zoomOffset: -1,\n    accessToken: `pk.eyJ1IjoiZW1tYW51ZWxlLW9ubGluZSIsImEiOiJja28yMmh0bjEwMm5hMnZtbGlsZ3UwbXozIn0.ECsgpDntVzNVDMZ9nhFy5A`\n}).addTo(mymap);\nL.tileLayer(`https://tiles.aqicn.org/tiles/usepa-aqi/{z}/{x}/{y}.png`).addTo(mymap);\n\n// ---< Publish info of user location as a starting layout >--- ---<>--- ---<>---\nwindow.addEventListener('load', () => {\n  fetch(`https://api.waqi.info/feed/here/?token=1a3e3d1e541f52ae2b24fc3036c9ca3902557c2d`)\n    .then(res => res.json())\n    .then(res => {\n      const cityName = res.data.city.name;\n      const aqiValue = res.data.aqi;\n      const cityCoords = res.data.city.geo;\n      publishAqi(cityName, aqiValue);\n      mymap.setView(cityCoords, 13)\n    })\n})\n\n// ---< When form:\"submit\". Request waqi and publish results >--- ---<>--- ---<>---\nsearchForm.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n  waitLayout();\n  const city = inputText.value;\n  fetch(`https://api.waqi.info/feed/${city}/?token=1a3e3d1e541f52ae2b24fc3036c9ca3902557c2d`)\n    .then(res => res.json())\n    .then(res => {\n      const cityName = res.data.city.name;\n      const aqiValue = res.data.aqi;\n      const cityCoords = res.data.city.geo;\n      publishAqi(cityName, aqiValue);\n      mymap.setView(cityCoords, 13)\n    })\n    .catch(error => errorLayout(error, city))\n})\n\n\n// ---< Publish aqi and info associated to it >--- ---<>--- ---<>---\nconst publishAqi = function (city, aqi){\n\n  aqiIndex.classList.remove(\"animate__swing\");\n  if(aqi > 300){\n    cityName.innerText = `${city}`;\n    aqiIndex.innerText = `⚫ ${aqi} ⚫`;\n    aqiLevelMessage.innerText = '💀 Hazardous! 💀';\n    heathImplications.innerText = 'Health alert: everyone may experience more serious health effects';\n    cautionaryStatement.innerText = 'Everyone should avoid all outdoor exertion';\n  } else if (aqi > 200){\n    cityName.innerText = `${city}`;\n    aqiIndex.innerText = `🟤 ${aqi} 🟤`;\n    aqiLevelMessage.innerText = '🚨 Very unhealthy 🚨';\n    heathImplications.innerText = 'Health warnings of emergency conditions. The entire population is more likely to be affected.';\n    cautionaryStatement.innerText = 'Active children and adults, and people with respiratory disease, such as asthma, should avoid all outdoor exertion; everyone else, especially children, should limit outdoor exertion.';\n  } else if (aqi > 150){\n    cityName.innerText = `${city}`;\n    aqiIndex.innerText = `🔴 ${aqi} 🔴`;\n    aqiLevelMessage.innerText = '🏭 Unhealthy 🏭';\n    heathImplications.innerText = 'Everyone may begin to experience health effects; members of sensitive groups may experience more serious health effects';\n    cautionaryStatement.innerText = 'Active children and adults, and people with respiratory disease, such as asthma, should avoid prolonged outdoor exertion; everyone else, especially children, should limit prolonged outdoor exertion';\n  } else if (aqi > 100){\n    cityName.innerText = `${city}`;\n    aqiIndex.innerText = `🟠 ${aqi} 🟠`;\n    aqiLevelMessage.innerText = '🌆 Unhealthy for sensitive groups 🌆';\n    heathImplications.innerText = 'Members of sensitive groups may experience health effects. The general public is not likely to be affected.'\n    cautionaryStatement.innerText = 'Active children and adults, and people with respiratory disease, such as asthma, should limit prolonged outdoor exertion.';\n  }else if (aqi > 50){\n    cityName.innerText = `${city}`;\n    aqiIndex.innerText = `🟡 ${aqi} 🟡`;\n    aqiLevelMessage.innerText = '🍂 Moderate 🍂';\n    heathImplications.innerText = 'Air quality is acceptable; however, for some pollutants there may be a moderate health concern for a very small number of people who are unusually sensitive to air pollution.';\n    cautionaryStatement.innerText = 'Active children and adults, and people with respiratory disease, such as asthma, should limit prolonged outdoor exertion.';\n  } else if (aqi > 0){\n    cityName.innerText = `${city}`;\n    aqiIndex.innerText = `🟢 ${aqi} 🟢`;\n    aqiLevelMessage.innerText = '🌿 Good 🌿 ';\n    heathImplications.innerText = 'Air quality is considered satisfactory, and air pollution poses little or no risk';\n    cautionaryStatement.innerText = 'None';\n  } \n}\n\n// ---< Show ⌛ to user >--- ---<>--- ---<>---\nconst waitLayout = function (){\n  infoBox.classList.remove(\"error\");\n  searchForm.classList.remove(\"error\");\n  cityName.innerText = \"Searching...\";\n  aqiIndex.innerText = \"⌛\";\n  aqiIndex.classList.add(\"animate__swing\");\n  aqiLevelMessage.innerText = \"Wait please...\";\n  heathImplications.innerText = \"\";\n  cautionaryStatement.innerText = \"\";\n}\n\n// ---< Show error to user >--- ---<>--- ---<>---\nconst errorLayout = function (error){\n  infoBox.classList.add(\"error\");\n  searchForm.classList.add(\"error\");\n  cityName.innerText = error;\n  aqiIndex.innerText = \"⚠️\";\n  aqiLevelMessage.innerText = `It seems that there isn't stations for the location you searched. Try looking for a station near you in the map 🕵️`;\n  heathImplications.innerText = \"💤\";\n  cautionaryStatement.innerText = \"💤\";\n  navigator.geolocation.getCurrentPosition(p => {\n    mymap.setView([p.coords.latitude, p.coords.longitude])\n   })\n}\n\n//# sourceURL=webpack://aqi-checker/./src/JS/index.js?")}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/JS/index.js")})();